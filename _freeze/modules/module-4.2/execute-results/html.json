{
  "hash": "8108ea01da82874b506a3142ca565935",
  "result": {
    "markdown": "---\ntitle: \"Module 4.2\"\nsubtitle: \"Regression Tables and Coefficient Plots\"\nformat: html\nhighlight-style: atom-one\nexecute:\n  echo: true\n  message: false\n  warning: false\n---\n\n\n::: callout-tip\n## Prework\n\n-   Install [peacesciencer](http://svmiller.com/peacesciencer/) and familiarize yourself with the documentation, `install.packages(\"peacesciencer\")`\n:::\n\nUse {peacesciencer}, teach broom, regression table package of some sort and coeffplots.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(peacesciencer)\nlibrary(dplyr)\n\nconflict_df <- create_stateyears(system = 'gw') |>\n  filter(year %in% c(1949:2019)) |>\n  add_ucdp_acd(type=c(\"intrastate\"), only_wars = FALSE) |>\n  add_democracy() |>\n  add_creg_fractionalization() |>\n  add_sdp_gdp() |>\n  add_rugged_terrain()\n\nglimpse(conflict_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 10,268\nColumns: 20\n$ gwcode         <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…\n$ statename      <chr> \"United States of America\", \"United States of America\",…\n$ year           <dbl> 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1…\n$ ucdpongoing    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ ucdponset      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ maxintensity   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ conflict_ids   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ v2x_polyarchy  <dbl> 0.599, 0.587, 0.602, 0.601, 0.594, 0.603, 0.614, 0.633,…\n$ polity2        <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,…\n$ xm_qudsest     <dbl> 1.252190, 1.270106, 1.259412, 1.345101, 1.345101, 1.345…\n$ ethfrac        <dbl> 0.2294918, 0.2318781, 0.2343169, 0.2368087, 0.2393554, …\n$ ethpol         <dbl> 0.4255134, 0.4290458, 0.4326358, 0.4362829, 0.4399888, …\n$ relfrac        <dbl> 0.5065309, 0.5093204, 0.5120965, 0.5148594, 0.5176094, …\n$ relpol         <dbl> 0.7770729, 0.7771274, 0.7771923, 0.7772656, 0.7773457, …\n$ wbgdp2011est   <dbl> 28.534, 28.572, 28.635, 28.669, 28.725, 28.730, 28.764,…\n$ wbpopest       <dbl> 18.804, 18.821, 18.832, 18.848, 18.868, 18.883, 18.901,…\n$ sdpest         <dbl> 28.469, 28.510, 28.576, 28.611, 28.668, 28.674, 28.708,…\n$ wbgdppc2011est <dbl> 9.730, 9.752, 9.803, 9.821, 9.857, 9.848, 9.863, 9.885,…\n$ rugged         <dbl> 1.073, 1.073, 1.073, 1.073, 1.073, 1.073, 1.073, 1.073,…\n$ newlmtnest     <dbl> 3.214868, 3.214868, 3.214868, 3.214868, 3.214868, 3.214…\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(broom)\n\nconflict_model <- glm(ucdponset ~ ethfrac + relfrac + v2x_polyarchy + \n                        rugged + wbgdppc2011est + wbpopest,\n                  data=subset(conflict_df),\n                  family = binomial(link=\"logit\"))\n\n#tidy(conflict_model)\n\nconflict_model |>\n  tidy() |>\n  mutate_if(is.numeric, round, 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 7 × 5\n  term           estimate std.error statistic p.value\n  <chr>             <dbl>     <dbl>     <dbl>   <dbl>\n1 (Intercept)    -5.73       1.32      -4.33  0.00001\n2 ethfrac         0.679      0.366      1.85  0.0637 \n3 relfrac        -0.392      0.403     -0.971 0.331  \n4 v2x_polyarchy  -1.19       0.462     -2.58  0.00984\n5 rugged         -0.00845    0.0768    -0.110 0.912  \n6 wbgdppc2011est -0.364      0.106     -3.45  0.00057\n7 wbpopest        0.303      0.0647     4.69  0      \n```\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"NAborder-bottom: 0;border-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;\" class=\"table\">\n<caption>Table 1: Predictors of Conflict Onset</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:center;\"> Ethnicity </th>\n   <th style=\"text-align:center;\"> Democracy </th>\n   <th style=\"text-align:center;\"> Terrain </th>\n   <th style=\"text-align:center;\"> Full Model </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Ethnic Frac </td>\n   <td style=\"text-align:center;\"> 0.703* </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> 0.679+ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.357) </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> (0.366) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Religions Frac </td>\n   <td style=\"text-align:center;\"> −0.503 </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> −0.392 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.399) </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> (0.403) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Polyarchy </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> −0.759* </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> −1.192** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> (0.382) </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> (0.462) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Terrain </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> −0.036 </td>\n   <td style=\"text-align:center;\"> −0.008 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:center;\"> (0.075) </td>\n   <td style=\"text-align:center;\"> (0.077) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Per capita GDP </td>\n   <td style=\"text-align:center;\"> −0.503*** </td>\n   <td style=\"text-align:center;\"> −0.396*** </td>\n   <td style=\"text-align:center;\"> −0.487*** </td>\n   <td style=\"text-align:center;\"> −0.364*** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.094) </td>\n   <td style=\"text-align:center;\"> (0.090) </td>\n   <td style=\"text-align:center;\"> (0.078) </td>\n   <td style=\"text-align:center;\"> (0.106) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Population </td>\n   <td style=\"text-align:center;\"> 0.292*** </td>\n   <td style=\"text-align:center;\"> 0.333*** </td>\n   <td style=\"text-align:center;\"> 0.333*** </td>\n   <td style=\"text-align:center;\"> 0.303*** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.064) </td>\n   <td style=\"text-align:center;\"> (0.047) </td>\n   <td style=\"text-align:center;\"> (0.047) </td>\n   <td style=\"text-align:center;\"> (0.065) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Intercept </td>\n   <td style=\"text-align:center;\"> −4.791*** </td>\n   <td style=\"text-align:center;\"> −5.863*** </td>\n   <td style=\"text-align:center;\"> −5.336*** </td>\n   <td style=\"text-align:center;\"> −5.733*** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;box-shadow: 0px 1px\">  </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (1.257) </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (1.049) </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (1.013) </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (1.323) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Num.Obs. </td>\n   <td style=\"text-align:center;\"> 8308 </td>\n   <td style=\"text-align:center;\"> 9249 </td>\n   <td style=\"text-align:center;\"> 9345 </td>\n   <td style=\"text-align:center;\"> 8082 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> + p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> See appendix for data sources.</td></tr></tfoot>\n</table>\n\n`````\n:::\n:::\n\n\n## When a coefficient plot is better\n\nA table is not as compelling for one model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelsummary(conflict_model, \n             stars = TRUE,  \n             gof_map = c(\"nobs\"),\n             coef_map = coef_map,\n             title = caption, \n             notes = reference)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"NAborder-bottom: 0;border-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;\" class=\"table\">\n<caption>Table 1: Predictors of Conflict Onset</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:center;\"> Model 1 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Ethnic Frac </td>\n   <td style=\"text-align:center;\"> 0.679+ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.366) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Religions Frac </td>\n   <td style=\"text-align:center;\"> −0.392 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.403) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Polyarchy </td>\n   <td style=\"text-align:center;\"> −1.192** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.462) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Terrain </td>\n   <td style=\"text-align:center;\"> −0.008 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.077) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Per capita GDP </td>\n   <td style=\"text-align:center;\"> −0.364*** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.106) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Population </td>\n   <td style=\"text-align:center;\"> 0.303*** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.065) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Intercept </td>\n   <td style=\"text-align:center;\"> −5.733*** </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;box-shadow: 0px 1px\">  </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (1.323) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Num.Obs. </td>\n   <td style=\"text-align:center;\"> 8082 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> + p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr></tfoot>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> See appendix for data sources.</td></tr></tfoot>\n</table>\n\n`````\n:::\n:::\n\n\nBetter to do a coefficient plot. Have to call `ggplot2` for customization.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](module-4.2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n$x\n[1] \"\"\n\n$title\n[1] \"Figure 1: Predictors of Conflict Onset\"\n\n$caption\n[1] \"Note: Coefficients and 95% confidence intervals.\"\n\nattr(,\"class\")\n[1] \"labels\"\n```\n:::\n:::\n",
    "supporting": [
      "module-4.2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}